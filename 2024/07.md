# 2024/07 学習記録

**基本スケジュール**
*  ひとまず課題を優先する
*  「基本情報技術者」「プリンシプルオブプログラミング」書籍を読む
*   「JavaScript データ・アルゴリズム課題」を復習として最低3問解く

***その他メモ***
*  ロジックを小さい単位に分解して、言葉で説明できるようにした後にコードを書く
*  デバッグは「ステップ実行」でやってみる


**今月目標**

* Express (Web API CRUD 課題)を完了させる
* 過去の課題の復習を毎日取り組む

***

## 2024/07/01
- MySQL初級チュートリアルFB対応
     -  第二正規化まではできている
     -  MySQLのverを上げたことでバックアップの時のmysqldumpでPROCESS特権が必要になった様子
     -  正規化について調べる↓
- 基本情報技術者の書籍でデータベースについて確認
     -  正規化についてしっかり読む
     -  データベース内の情報を重複しないように保つための設計概念（同じようなデータが散在していると、同期が難しくなり不整合ができるから）
     -  第一正規系　：　非正規から重複した部分を取り除いたもの
     -  第二正規系　：　部分関数従属の列を切り出したカタチ
     -  関数従属　：　主キーが決まると列の値が定まる　例）　「社員番号」が決まると「名前」が決まる
     -  部分関数従属　：　複合キーの一部の項目だけで列の値が定まる
     -  第三正規系　：　主キー以外の列に関係従属している列を切り出したもの
### メモ
-  帰省中に新幹線で勉強したら酔う
-  帰省中は結局勉強できず二日間ブランクができてしまったので、今日から取り返そう
-  先月の目標は達成！
-  今月はバックエンドの課題を完了させたい

***

## 2024/07/02
- MySQL初級チュートリアルFB対応
     -  昼休みに本屋でMySQLの書籍を立ち読みしていて
     -  外部キー制約が設定できているかどうかは
     -  設定していない値を投入してエラーが出るかどうかで確認できそうと思いつく
     -  帰ってきて試したら予想したエラーが出た
     -  mysqldumpの権限エラーは引き続き検証
- MySQLクライアント（GUI）を導入
     -  実際の現場ではツールを利用しているらしい
     -  Table Plusを導入してみる
     -  コマンドで実行していた時に、syntaxエラーで ERROR 1064 (42000)が出たこともあり
     -  視覚的に操作できてミスも減らせそう
     -  Sequel Pro　より　Table Plus　の方がサポートが多く安定していて乗り換える人が多い様子
- AtCoderの「アルゴリズムと数学　演習問題集」に挑戦する
     -  008 - Brute Force 1
     -  油断していたらちょっとハマった
     -  whileとforでなんとか完了したけど、再帰関数とかでやった方がスマートかもしれない
- 業務でブラウザバックを検知する処理対応
     -  PerformanceNavigationTiming: type : ブラウザのナビゲーションイベントを検知
     -  typeプロパティでナビゲーションのタイプを取得できる（戻るボタンは ”back_forward”）
     -  以下はブラウザ側のアップデートで対応できなくなっている
     -  popstate : 履歴が更新された時にイベントを検知
     -  History: replaceState() : 現在の履歴を編集し、メソッドに引数で渡された状態オブジェクトやURLで置き換える
### メモ
-  本日は出社しました

***

## 2024/07/03
- MySQL初級チュートリアルFB対応
     -  mysqldumpの権限エラー
     -  rootにログインしてから作成したデータベースの権限を変える
     -  作成したデータベースに入った状態でmysqldumpしていたけど
     -  rootに移動してmysqldumpしたら無事完了
     -  ここにいきつくまでにかなり時間を使った
     -  [https://isgs-lab.com/424/](https://isgs-lab.com/424/)
     -  dmpファイルをチェックしてもらい、完了🙌
- Express+TypeScript環境の構築
### メモ
-  MySQLチュートリアル完了して嬉しい
-  次は Express+TypeScript環境の構築

***

## 2024/07/04
- 「プリンシプルオブプログラミング」の「プログラミングセオリー」を読む
     -  「最高のコード」とは、拡張方法が多い、余分な要素が存在しない、読みやすく理解しやすい
     -  実現するためのセオリー
     -  コミュニケーション・シンプル・柔軟性
     -  技術を高めることは重要だけど、問題解決のために適切な技術を選択できることが大事
     -  フォース　：　ある技術を適用する時に考慮すべき観点のこと
     -  解決策が満たすべき「要件」 ・ 課題に含まれている「制約」　・　　解決策に望まれる「特性」
     -  良いプログラマは、その技術が「何のために」「歴史（原理、進化の過程、設計の背景）」を理解してから取り掛かる
- Express+TypeScript環境の構築
     -  Udemyも参考にしながら構築
     -  ルートのエンドポイントが指定のjsonを返却できている・・はず
- TypeScriptについて調べる
     -  型システムを追加する ・ モダンではない環境でもjavascriptを使用できるようにする
     -  コンパイラが必要
     -  型アノテーション : 開発者が型を指定する
- Node.js + TypeScript
     -  Node.jsの処理はモジュール単位に分けられる
     -  httpモジュール : httpサーバーを立てる機能
     -  fsモジュール : ファイルの読み書きを行う機能
### メモ
-  Express面白い

***

## 2024/07/05
- 「プリンシプルオブプログラミング」の「プログラミングセオリー」を読む
     -  昨日の続き
     -  コミュニケーション
         -  プログラミングにおいてコミュニケーション良好　＝　コードを読んだ人が理解、修正、使用することができる
         -  実現するために
         -  コードを読む側の視点に立ち、問題解決について考える
     -  シンプル
         -  コードがシンプル　＝　「余分な複雑性」が取り除かれた状態
     -  柔軟性
         -  コードの変更の容易さ
         -  ソフトウェアを改善するための保守作業を円滑に進めるために必要
- Express+TypeScript環境の構築
     -  TypeScript仕様に変更
     -  ts-nodeを使用する
     -  tsconfig.json : 型チェックをどのぐらい厳しくするか設定できる
     -  manコマンド : コマンドの使い方を表示してくれる
- Sequerize（シークライズ）
     -  ORMライブラリ
     -  アプリケーションのコードからDBを使うための方法
     -  DBの仕様を意識せず使えるようになる
- MVC
     -  ソフトウェア開発におけるデザインパターン
     -  保守性UP
     -  アプリケーションを3つのコンポーネントに分割（M・C・V）
     -  M: モデル
         -  DBと連携してデータを保存
         -  必要に応じてCに送信
     -  V: View
         -  データを表示したり入力する
     -  C: コントローラ
         -  VとMの調整役 
### メモ
-  今のところSequerizeでどう設計していくのか想像もつかないけど、DB設計を便利にしてくれるということはわかった

***

## 2024/07/06
- Sequerizeの導入
     -  テーブル定義書を元にモデルの作成（定義）ができた🙌
     -  データ型はこちらを参考に
     -  [data-types](https://sequelize.org/v5/manual/data-types)
     -  リレーション部分で悩む
         -  図に書いて相互関係を整理
         -  static associate(models) {}に記載
         -  記事を参考にして達成
         -  [Sequelizeで複数テーブルのリレーションを定義し、テーブル結合してみる](https://qiita.com/furi-kake/items/37d5b8a74bd0fe662a31)
     -  コマンドでマイグレーションを実行するとMySQLがconnect ECONNREFUSEDに・・・
         -  チュートリアルでDockerを使用してMySQLを使ったけどそれをまた使うのかPC上に新たにインストールするのか・・・？
         -  DockerでMySQLを使用して、接続してみたけど権限エラー発生
         -  config通りに新たにdatabase設定して権限も付与してみたけど変わらず
         -  PCにMySQLをインストールして確認してみたいけど一応確認してからにしよう
- Sequerize（ORM）用語
     -  モデル
         -  DBのテーブルをjsで扱うためのもの
     -  マイグレーションファイル
         -  DBのテーブル定義変更のためのファイル
         -  createTable()、dropTable()メソッドがある
     -  id,createdAt,updatedAtは自動で追加される
         -  idは自動的に主キーに
         -  変更したい場合はモデルを修正
- 基本情報技術者の書籍で「トランザクション管理と排他制御」について読む
     - トランザクション
         -  一連の処理をひとまとめにしたもの
     - 排他制御
         -  処理中（トランザクションの間）のデータをロックして他の人が読み書きできないようにする
     - デッドロック
         -  複数のトランザクションがお互いにロックして待ち続ける現象
- AtCoderの「アルゴリズムと数学　演習問題集」に挑戦する
     -  気晴らしに挑戦
     -  009 - Brute Force 2 
     -  全探索と動的計画法の両方を扱わないと満点にならない
     -  動的計画法
         -  一回出した答えを表に記録して次回に活かす
     -  再起関数の場合、呼び出しの数が増えると計算量が増え続ける
     -  メモ化再帰
         -  初めて計算する時に再帰呼び出しの結果を変数にメモ
         -  一回求めた値はメモから参照
### メモ
-  MySQLが接続できないとリレーションが合っているのか確認できない

***

## 2024/07/07
- Sequerizeの導入
     -  マイグレーション実行できた🙌
         -  エラーの内容に　「using password: NO」があって、パスワードがないからアクセスできないということだった
         -  config.jsonのpasswordにパスワードを設定して実行完了
         -  何時間もかけたのになぜ気が付かなかったのか・・・
         -  でもチュートリアルを何度も見直してやり直したので理解が深まった
     -  シーディングのためのデータを記述するファイルを作成
         -  シーディング
         -  DBにサンプルデータを挿入する方法
         -  作成したファイルを元にサンプルデータを作成するらしい
### メモ
-  MySQLでハマったところが解消できて嬉しい
-  今年初の桃のかき氷を食べる

***

## 2024/07/08
- Sequerizeの導入
     -  指定のテーブルのシードファイル作成完了🙌
         -  TablePlusに接続して確認してみたらちゃんとデータが確認できた
     -  次は認証/認可の実装
- 週末のインプットのおさらい
- 「プリンシプルオブプログラミング」を読む
     -  ロジックとデータの一体化
         -  ロジックとロジックが操作するデータを近くに置く
         -  同じ関数・モジュールに
         -  変更コストを抑えられる
     -  宣言型の表現
         -  「命令型」より「宣言型」
         -  命令型 ： 「問題の解法」 データ構造・アルゴリズム　＝　常に「状態」「制御」「データのフロー」を考える必要がある
         -  宣言型 ： 「問題の定義」 問題の性質・満たすべき制約 = 順序・条件分岐がないので読みやすい
### メモ
-  灼熱の中出社しました

***

## 2024/07/09
- Sequerizeの導入FB対応
     -  TypeScriptにできていなかったところを対応（主にModel）
     -  ts-nodeをdevDependenciesへ移動
         -  今まであまり意識できていなかった
         -  [dependenciesとdevDependenciesの違い](https://zenn.dev/jun0723/articles/e6a8dffbb16f02)
- MySQLについて書籍を読む
     -  昼休憩の時に、初心者向けのMySQLの書籍を立ち読み
     -  前より内容が頭にスッと入ってきて嬉しい
     -  チュートリアルの時に気になっていた「information_schema」「performance_schema」について書いてあり、その後調べる
     -  MySQLは「システムデータベース」と「ユーザーデータベース」の2つに分けられる
     -  システムデータベース（information_schema,performance_schema,mysql,sys）
         -  MySQL内部で使用されるデータベース
         -  MySQLサーバーをインストールしたタイミングで自動で作成される
         -  information_schema : サーバーに関する情報を保存
         -  performance_schema : パフォーマンスに関する情報を保存
         -  mysql : サーバーの実行時に必要な情報を保存
         -  sys : information_schema,performance_schemaからみやすく情報を保存、MySQLサーバーの状態（プロセス、ホスト、セッション、メモリ）を保存
     -  ユーザデータベース
         -  ユーザやアプリで作成したデータベース
### メモ
-  今日も出社しました
-  暑いけど昨日よりはだいぶ過ごしやすい

***

## 2024/07/10
- Sequerizeの導入FB対応
     -  TypeScriptにできていなかったところを対応（主にModel）
         -  以下を参考にする
         -  [TypeScript for JavaScript Programmers](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html)
     -  dependenciesからdevDependenciesへ移動
         -  [npmでモジュールをdevDependenciesからdependenciesに変更する](https://saiko1988.hatenablog.com/entry/2022/06/29/010838)
     -  シードファイルに記入したcreatedAt, updatedAtの設定をマイグレーションファイルに移動したいけど、default valueがないと言われる
         - モデルにDataTypes.NOWを設定してみたり
         - マイグレーションファイルにdefaultValueを設定してもエラーが出るのはなぜ
         - ここを参考に
         - (https://sequelize.org/docs/v6/core-concepts/model-basics/#default-values)
### メモ
-  今日は前職のお友達とランチ

***

## 2024/07/11
- Sequerizeの導入FB対応
     -  TypeScriptにできていなかったところを対応（主にModel）
         -  TypeScriptのドキュメントを見ているけどまだ理解が足りていない
         -  Sequerizeの型タイプはどう指定すればよいのか
         -  いろいろ掘って「sequelize-typescript」でやろうとしているけど問題ないのか
         -  こっちを参考にしたほうがよいのか [TypeScript](https://sequelize.org/v5/manual/typescript)
     -  シードファイルに記入したcreatedAt, updatedAtの設定をマイグレーションファイルに移動
         - いろいろ試したけど相変わらず同じエラー（ERROR: Field 'createdAt' doesn't have a default value）
         - 以下の記事でもモデルで設定しようとしてダメだったと書いてある
         - [question: createdAt & updatedAt default value #414](https://github.com/sequelize/cli/issues/414)
### メモ
-  明日は面談だけど、現時点でわからないことだらけ
-  頭の中を整理しないと

***

## 2024/07/12
- Sequerizeの導入FB
     -  TypeScriptにできていなかったところを対応（主にModel）
         -  「sequelize-typescript」は使用せず公式のやり方で
         - ライブラリを使用すると、自分で設定することを代わりにやってくれるので、自分で理解する必要があることができない
         -  全体的に古い書き方になっている（module.exporsなど）
         -  belongsToManyなど使い方を確認する
         -  上記の対応
         -  Sequerize公式ドキュメントの TypeScript に関連しているページをひたすら読む
         -  associations の設定で、関連先？の定義を同じファイル内でやっているサンプルがおおいけど
         -  外部の定義した変数を使いたい場合はどうすればいいのか（importでやってみたけどうまくいかず）
         -  Sequerize公式ドキュメントの associations に関連しているページをひたすら読む
     -  シードファイルに記入したcreatedAt, updatedAtの設定をマイグレーションファイルに移動の謎について
         - 出ていたエラー（ERROR: Field 'createdAt' doesn't have a default value）
         - 結局　migrations　は後から修正した場合
         - 一度undoing migrationsして作り直さないと更新されないということだった！
         - SequelizeMetaに現在のデータベースでどのmigrationsを実行されたかを記録されている
- export・import・requireについて確認
     -  TypeScript対応の流れがありドキュメントを確認
     -  requre()
         - 他のファイルを読み込む機能（ファイル内のどこでも書ける)
     -  module.exports
         - 他のファイルを読み込むためには、そのファイルが何かを出力する必要があり、そのために使用する
     -  exports
         - module.exportsだと出力しているものの名前を変更できてしまうので、避けたい時に使用する
     -  【ES Module （ES6で追加された機能）】
     -  import
         - require()と同じ機能（但しファイルの一番上に書く）
     -  export default
         - module.exports　に対応（ファイル内に一つだけ書く）
     -  export
         - exports に対応
     -  import()
         - ファイルの先頭に書くimportは、動的にファイルを切り替えられないので、import()を使用する
         - require()と異なり、Promise（非同期）でモジュールの読み込みを行う
### メモ
-  公式ドキュメント以外の記事は、書いている人がドキュメントの情報をフィルタリングして書いているから
-  それ以上の情報を得られない
-  全体像を理解するために、公式ドキュメントから情報を得るクセづけをする
-  その情報の周辺に書かれていることも読む
-  これらを当たり前にできるようにならないと、一人前のエンジニアにはなれない・・
-  英語の公式ドキュメントを読むのは脳の負荷が高くて辛いけど、効果絶大

***

## 2024/07/13
- Sequerizeの導入FB
     -  TypeScriptにできていなかったところを対応（主にModel）
         -  Sequerize公式ドキュメントの TypeScript に関連しているページを参考に対応
         -  ↑OKもらう🙌
         -  外部の定義した変数が使えなかった問題は定義元でexportしてないだけだった
         -  あとはmodel部分をまとめているindex
- 「プリンシプルオブプログラミング」を読む
     -  アーキテクチャ根底技法 ： ソフトウェア開発の歴史の中で多くのプログラマが蓄積、実践した経験に基づいた原理
         -  抽象
         -  カプセル化
         -  情報隠蔽
         -  パッケージ化
         -  関心の分離
         -  充足性、完全性、プリミティブ性
         -  ポリシーと実装の分離
         -  インターフェースと実装の分離
         -  参照の一点性
         -  分割統治
     -  今の所理解できる部分（すでに本で読んだ項目）とまだわからない部分がある
     -  次からひとつづつ確認
- オブジェクト指向について確認
     -  しばらく関数型プログラミングの頭でいたけど
     -  苦手意識の高いオブジェクト指向に向き合う必要が出てきた・・
     -  [日本語とオブジェクト指向](https://satoshi.blogs.com/life/2004/09/post.html)
### メモ
-  もっと意識的に運動しないと

***

## 2024/07/14
- Sequerizeの導入FB
     -  TypeScriptにできていなかったところを対応（主にModel）
         -  残りのmodelフォルダにあるファイルと、model部分をまとめているindexをtsに
         -  models/indexでは、config.jsonの実行環境ごとの設定を元に初期化、サーバーとの連携の設定
         -  念の為 undoing migrations してからシードファイルの実行をしてみる
         -  TablePlusでデータの確認（SequerizeMeta・Dataのタイムスタンプも更新されている）から大丈夫かな・？
- Passportについて調べる
     -  ts対応のFBがくるまで、次のステップ「認証/認可の実装」の準備
     -  node.jsのための認証ミドルウェア
     -  簡単にアプリケーションに組み込める
     -  以下三つの設定が必要
         -  認証用ストラテジーの選択
         -  アプリケーションミドルウェア
         -  セッション管理
     -  OAuth（オーオース）
         -  複数のwebサービスを連携して動作させる仕組み
         -  個別にID/パスワードを入れることなく連携できる
- Herokuのアカウントを作成
### メモ
-  次のステップの「認証/認可の実装」は
-  まだ何から始めるのか想像もつかないけど
-  Passportを使うのか？

***

## 2024/07/15
- Sequerizeの導入FB
     -  config.jsonに直で書いているパスワードを、dotenvを使用して環境変数で情報接続を管理に変更
         -  まずconfig.jsonをjsに変更する
         -  最初の構築で設定し忘れていた「.sequelizerc」を作成
         -  パスの指定で何度も間違えてハマる
         -  なんとかできたけどjsの記述をES6仕様に変更しようとしてまたハマる
         -  公式ドキュメントの通りに指定
         -  require()をimportにしてみたり
         -  module.exportsをexport defaultにしてみたけど
         -  Cannot use import statement outside a module エラーが出る
         -  途中で拡張子を mjs にするかpackage.jsonにtype:moduleを指定して
         -  というエラーでpackage.jsonに変更したら
         -  migirationはES6にサポートしていません？というエラーが発生
         -  一旦commonjs方式で
### メモ
-  もう少しimport,exportについて理解する必要がありそう

***

## 2024/07/16
- Sequerizeの導入は一旦OKもらう🙌
- ステップ3 認証/認可の実装に進む
     -  とりあえずAPI仕様書を見る
     -  Passportをインストール
- Passportについて調べる（続き）
- Chromeの拡張「Talend API Tester」を入れる
### メモ
-  本日は出社しました
-  珍しく学校から呼び出し（体調不良）があり、早めに自宅作業に切り替え

***

## 2024/07/17
- ステップ3 認証/認可の実装に進む
     -  参考のURL・各種ドキュメントを見る
     -  一旦以下の仮説で進めてみる
     -  node.js+expressでエンドポイントにPOSTリクエストして
     -  パラメータをJSONで取得
     -  エンドポイント auth/login にリクエスト、passportで認証
### メモ
-  本日も出社しました

***

## 2024/07/18
- デモを確認
     -  そもそもデモをどう確認していいのかわからずしばらく悩んでいたけど
     -  Talend API Teserを使用してPOSTリクエストをしたら
         -  デモのユーザー作成成功
         -  認証も成功
     -  しかし認証時に受け取ったトークンをヘッダに含めてその他のエンドポイントにリクエストを送ると
         -  401（有効な認証資格情報がない）エラー
         -  ヘッダにログイン情報指定したりいろいろ試す
         -  AuthorizationにTokenの値を指定する時に「Bearer」を頭に入れたら成功
     -  Bearer
         -  あとで確認
         -  [Bearer Tokenとは？その詳細を完全解説！](https://apidog.com/jp/blog/what-is-bearer-token/)
- ステップ3 認証/認可の実装に進む
     -  node.js+expressでエンドポイントにPOSTリクエストして、パラメータをJSONで取得はできているはず
     -  ユーザーの作成とは・・
### メモ
-  何かがいろいろ違ってて、頭の中の情報が繋がっていない。。。

***

## 2024/07/19
- デモを確認
     -  デモでpostに投稿できなかった問題
     -  500 Internal Server Errorが出ていた
         -  500エラーの場合は大元に確認する
     -  Bearer
         -  AuthorizationをTokenで認証するときのお作法的なもの
- ステップ3 認証/認可の実装に進む
     -  ユーザーの作成とは
         -  SequelizeでDBにデータを入れること
         -  SequelizeでCRUD処理をする
     -  どんなデータの保存の仕方だときれいに保存できるかを考える必要がある
     -  SequelizeのcreateメソッドでINSERTしてみる
         -  throw new Error('No Sequelize instance passed')
         -  インスタンスのエラー発生・・・
### メモ
-  説明を聞いてようやく繋がった感
